{% extends "base.html" %}

{% block content %}
<h1 class="text-2xl font-bold mb-4">Characters</h1>

<!-- Filters -->
<form method="get" class="mb-4 flex gap-2">
  <select name="role" class="border px-2 py-1 bg-white dark:bg-gray-800">
    <option value="">All Roles</option>
    <option value="WRESTLER">Wrestler</option>
    <option value="MANAGER">Manager</option>
    <option value="REFEREE">Referee</option>
    <option value="BOOKER">Booker</option>
  </select>

  <select name="alignment" class="border px-2 py-1 bg-white dark:bg-gray-800">
    <option value="">All Alignments</option>
    <option value="FACE">Face</option>
    <option value="HEEL">Heel</option>
    <option value="TWEENER">Tweener</option>
  </select>

  <select name="active" class="border px-2 py-1 bg-white dark:bg-gray-800">
    <option value="">All Status</option>
    <option value="true">Active</option>
    <option value="false">Inactive</option>
  </select>

  <button type="submit" class="bg-black text-white px-4 py-1 bg-white dark:bg-gray-800">Filter</button>
</form>

<!-- Add Character Button -->
<a href="{% url 'character-add' %}" class="bg-black text-white px-4 py-2 rounded mb-4 inline-block">
    Add Character
</a>

<!-- Character List -->
<table class="min-w-full border border-gray-300">
  <thead>
    <tr class="bg-gray-100 dark:bg-gray-700">
      <th class="px-4 py-2">Ring Name</th>
      <th class="px-4 py-2">Role</th>
      <th class="px-4 py-2">Alignment</th>
      <th class="px-4 py-2">Status</th>
      <th class="px-4 py-2">Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for char in characters %}
    <tr 
      class="border-t hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer"
      onclick="window.location='{% url 'character-detail' char.id %}'"
    >
      <td class="px-4 py-2 font-bold">{{ char.ring_name }}</td>
      <td class="px-4 py-2">{{ char.get_role_display }}</td>
      <td class="px-4 py-2">{{ char.get_alignment_display }}</td>
      <td class="px-4 py-2">
        {% if char.active %}Active{% else %}Inactive{% endif %}
      </td>
      <td class="px-4 py-2">
        <button onclick="event.stopPropagation(); window.location='{% url 'character-edit' char.id %}'" class="bg-yellow-500 text-white px-2 py-1 rounded">Edit</button>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="4" class="px-4 py-2">No characters found.</td>
    </tr>
    {% endfor %}

  </tbody>
</table>

<!-- Pagination -->
{% if is_paginated %}
<div class="mt-4">
  {% if page_obj.has_previous %}
    <button onclick="window.location='?page={{ page_obj.previous_page_number }}'" class="px-2 py-1 border bg-gray-200 dark:bg-gray-700 cursor-pointer">Previous</button>
  {% endif %}
  <span class="px-2 py-1">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
  {% if page_obj.has_next %}
    <button onclick="window.location='?page={{ page_obj.next_page_number }}'" class="px-2 py-1 border bg-gray-200 dark:bg-gray-700 cursor-pointer">Next</button>
  {% endif %}
</div>
{% endif %}
{% endblock %}
